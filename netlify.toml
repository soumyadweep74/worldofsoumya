# netlify.toml file in the repository root

[build]
  # Set the Base Directory where the main package.json lives and where npm install should run
  base = "worldofsoumya/image-ai"
  
  # This setting is now relative to the 'base' directory
  publish = "." 
  
  # This setting is also now relative to the 'base' directory
  # To find the function, Netlify must go up two levels: ../../netlify/functions
  functions = "../../netlify/functions"
  
  # Build command remains simple
  command = "npm install"
  
  # CRITICAL FIX: Forces isolated dependency installation
  environment = { NPM_FLAGS = "--legacy-peer-deps" }

[functions]
  # Explicitly tell Netlify to install dependencies for the functions folder
  node_bundler = "esbuild"
